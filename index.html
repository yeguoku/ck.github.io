<!DOCTYPE html>
<html>
<head>
	<title>用户注册</title>
</head>
<body>
	<h2>用户注册</h2>
	<form id="registrationForm">
		<div>
			<label for="email">邮箱：</label>
			<input type="email" id="email" name="email" required>
		</div>
		<div>
			<label for="password">密码：</label>
			<input type="password" id="password" name="password" required>
		</div>
		<div>
			<label for="confirmPassword">确认密码：</label>
			<input type="password" id="confirmPassword" name="confirmPassword" required>
		</div>
		<button type="submit">注册</button>
	</form>

	<script>
		document.getElementById('registrationForm').addEventListener('submit', function(event) {
			event.preventDefault(); // 阻止默认表单提交行为

			var email = document.getElementById('email').value;
			var password = document.getElementById('password').value;
			var confirmPassword = document.getElementById('confirmPassword').value;

			if (password !== confirmPassword) {
				alert('密码与确认密码不一致');
				return;
			}

			// 发起注册请求
			fetch('/register', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ email: email, password: password, confirm_password: confirmPassword })
			})
			.then(response => response.json())
			.then(data => {
				// 处理注册结果
				alert(data.message);
			})
			.catch(error => {
				// 处理错误
				alert('注册失败：' + error);
			});
		});
	</script>
</body>
</html>
